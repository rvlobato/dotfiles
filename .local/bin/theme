#!/usr/bin/env bash

toggle-theme() {
    current_gtk_theme=$(gsettings get org.gnome.desktop.interface gtk-theme)
    if [ $current_gtk_theme == "'Adwaita-dark'" ];
    then
	alacritty-themes Gruvbox-Dark
    else
	alacritty-themes One-Light
    fi
}

dbus-monitor "interface='org.freedesktop.portal.Settings', member='SettingChanged'" |
    while read -r line; do
	echo $line | grep Adwaita && toggle-theme
done
